{% extends "base_template.html" %}

{% block title %}Victory Road Calculator{% endblock %}

{% block body %}

    <input type="text" placeholder="Forward">
    <input type="number" placeholder="Kick" id="Kick" min="0" min="0"/>
    <input type="number" placeholder="Control" id="Control" min="0"/>
    <input type="number" placeholder="Bond" id="Bond" min="0" max="30"/>
    <input type="number" placeholder="+AT" id="ExtraAT" min="0"/>
    <input type="number" placeholder="Shoot Hissatsu" id="ShootHissatsu" min="0"/>
    <input type="checkbox" name="Elemental Advantage" id="ShootAdvantage" min="0"/>
    <input type="number" placeholder="Direct" id="Direct" min="0"/>
    <br>

    <select id="BootsKickerSelector" onchange="updateFW()">
        {% for data in players.Boots %}
            <option>{{ data.Boots }}</option>
        {% endfor %}
    </select>

    <input type="number" placeholder="Boots" id="BootsKicker" min="0"/>
    <input type="number" placeholder="Bracelet" id="BraceletKicker" min="0"/>
    <input type="number" placeholder="Pendant" id="PendantKicker" min="0"/>
    <input type="number" placeholder="Special" id="SpecialKicker" min="0"/>
    <br><br>
    <input type="text" placeholder="Goalkeeper">
    <input type="number" placeholder="Agility" id="Agility" min="0"/>
    <input type="number" placeholder="Physical" id="Physical" min="0"/>
    <input type="number" placeholder="Catch Hissatsu" id="CatchHissatsu" min="0"/>
    <input type="number" placeholder="+DF" id="ExtraDF" min="0"/>
    <input type="checkbox" name="Elemental Advantage" id="CatchAdvantage" min="0"/>
    <input type="number" placeholder="KP Increase" id="KPincrease" min="0"/>
    <input type="number" placeholder="Lost KP" id="LostKP" min="0"/>
    <br>
    <input type="number" placeholder="Castle Wall 1" id="CW1" min="0"/>
    <input type="number" placeholder="Castle Wall 2" id="CW2" min="0"/>
    <br>
    <input type="number" placeholder="Boots" id="BootsCatcher" min="0"/>
    <input type="number" placeholder="Bracelet" id="BraceletCatcher" min="0"/>
    <input type="number" placeholder="Pendant" id="PendantCatcher" min="0"/>
    <input type="number" placeholder="Special" id="SpecialCatcher" min="0"/>

    
    <p id="ShootResult"></p>
    <p id="CatchResult"></p>

    <select id="Kicker" onchange="updateFW()">
        {% for data in players.Players%}
            <option>{{ data.Player }}</option>
        {% endfor %}
    </select>




    <select id="Catcher" onchange="updateGK()">
        {% for data in players.Players%}
            <option>{{ data.Player }}</option>
        {% endfor %}
    </select>

    <img src="{{ url_for('static',filename='Tezcat.webp' ) }}" class="responsive"id="FW">
    <img src="{{ url_for('static',filename='Tezcat.webp' ) }}" class="responsive"id="GK">
    
    
    
    <script> 
 function calcular() {
        var Kick = parseFloat(document.getElementById("Kick").value) || 0;
        var Control = parseFloat(document.getElementById("Control").value) || 0;
        var Bond = parseFloat(document.getElementById("Bond").value) || 0;
        var ExtraAT = parseFloat(document.getElementById("ExtraAT").value) || 0;
        var ShootHissatsu = parseFloat(document.getElementById("ShootHissatsu").value) || 0;
        var Direct = parseFloat(document.getElementById("Direct").value) || 0;
        var BootsKicker = parseFloat(document.getElementById("BootsKicker").value) || 0;
        var BraceletKicker = parseFloat(document.getElementById("BraceletKicker").value) || 0;
        var PendantKicker = parseFloat(document.getElementById("PendantKicker").value) || 0;
        var SpecialKicker = parseFloat(document.getElementById("SpecialKicker").value) || 0;
        var Agility = parseFloat(document.getElementById("Agility").value) || 0;
        var Physical = parseFloat(document.getElementById("Physical").value) || 0;
        var CatchHissatsu = parseFloat(document.getElementById("CatchHissatsu").value) || 0;
        var ExtraDF = parseFloat(document.getElementById("ExtraDF").value) || 0;
        var KPincrease = parseFloat(document.getElementById("KPincrease").value) || 0;
        var LostKP = parseFloat(document.getElementById("LostKP").value) || 0;
        var CW1 = parseFloat(document.getElementById("CW1").value) || 0;
        var CW2 = parseFloat(document.getElementById("CW2").value) || 0;
        var BootsCatcher = parseFloat(document.getElementById("BootsCatcher").value) || 0;
        var BraceletCatcher = parseFloat(document.getElementById("BraceletCatcher").value) || 0;
        var PendantCatcher = parseFloat(document.getElementById("PendantCatcher").value) || 0;
        var SpecialCatcher = parseFloat(document.getElementById("SpecialCatcher").value) || 0;

        var ShootPower = Kick + Control + BootsKicker + BraceletKicker + PendantKicker + SpecialKicker;
        var FinalShootPower = ((ShootPower + ShootHissatsu + Direct) * (1 + (ExtraAT / 100)) * (1 + (Bond / 100)));
        var CatchPower = (Agility * 6) + (Physical * 3) + BootsCatcher + BraceletCatcher + PendantCatcher + SpecialCatcher;
        var FinalCatchPower = CatchPower + (CatchHissatsu * ExtraDF) + CW1 + CW2 + (CatchPower * (0 + (KPincrease / 100))) - LostKP;

        document.getElementById("ShootResult").innerHTML = "Shoot result: " + FinalShootPower;
        document.getElementById("CatchResult").innerHTML = "Catch Result: " + FinalCatchPower;
    }

    document.querySelectorAll('input').forEach(input => {
        input.addEventListener('input', calcular);
    });

    calcular();
     
        document.getElementById("ShootResult").innerHTML =
        "Shoot result: " + FinalShootPower;

        document.getElementById("CatchResult").innerHTML =
        "Catch Result: " + FinalShootPower;
        //formula tiro base = (Kick + Control + equipamiento)
        //formula atrape base = (Agility + physical + equipamiento)
        //formula tiro final = (( Tiro base + Shoot Hissatsu + Direct ) x (1 + Extra AT)) x Bond)
        //formula atrape final = atrape base + (Catch Hissatsu x Extra DF) + Castle wall 1 y 2 + (atrape base x (1 + KP Increase))  - LostKP 

        function updateFW() {
        var selectedPlayer = document.getElementById("Kicker").value;
        var imageElement = document.getElementById("FW");
        imageElement.src = "{{ url_for('static', filename='') }}" + selectedPlayer + ".webp";
        }

        function updateGK() {
        var selectedPlayer = document.getElementById("Catcher").value;
        var imageElement = document.getElementById("GK");
        imageElement.src = "{{ url_for('static', filename='') }}" + selectedPlayer + ".webp";
        }

        function updateBootsKicker(){
            ;
        }

        

    </script>
{% endblock %}